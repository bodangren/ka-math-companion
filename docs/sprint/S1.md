# Sprint S1 · Static Site Foundation

- **Duration**: 2 weeks
- **Goal**: Stand up a statically-exported Next.js shell that can render Integrated Math 3 curriculum context using synced data, with baseline lint/test automation ready for future feature work.
- **Milestone**: `Sprint 1 – Static foundation`
- **Labels**: `type:feature`, `type:chore`, `type:docs`, `area:frontend`, `area:content`, `priority:P1`

## Sprint Objective
Produce a working static site shell that lists Integrated Math 3 units from synced curriculum data and passes initial lint/test/build checks so future sprints can focus on pedagogy and learner experience.

## Stories

1. **Bootstrap Next.js static app skeleton**  
   - Set up a Next.js 15 App Router project with MDX support and static export configuration (`output: 'export'`, `trailingSlash: true`).  
   - Add shared layout (header with course title, basic typography, dark/light neutral styles).  
   - Acceptance criteria: `pnpm dev` serves the placeholder home page; `pnpm build` succeeds and produces `out/`.

2. **Wire Integrated Math 3 curriculum loader**  
   - Transform `docs/data/integrated-math-3.course.json` into a typed loader under `lib/`.  
   - Expose a `getCurriculum()` helper that returns units/lessons for build-time rendering.  
   - Acceptance criteria: Unit tests cover parser edge cases; loader fails fast on schema drift.

3. **Render curriculum overview page**  
   - Create `/curriculum` route listing units → lessons from the loader.  
   - Include mastery metadata (unit name, lesson count, mastery points) with accessible markup.  
   - Acceptance criteria: Snapshot/DOM test ensures lesson counts display; page links are static-safe.

4. **Establish linting, formatting, and testing baseline**  
   - Configure TypeScript, ESLint (with Next.js + custom content rules placeholder), and Vitest/Jest for unit tests.  
   - Add scripts: `pnpm lint`, `pnpm test`, `pnpm build`.  
   - Acceptance criteria: Commands run cleanly in CI; at least one loader test executes via `pnpm test`.

5. **Automate curriculum sync hand-off**  
   - Wrap the existing sync script in a documented `pnpm` task and capture usage in README.  
   - Ensure fresh sync updates `docs/data/integrated-math-3.course.json` without manual edits.  
   - Acceptance criteria: README instructions verified; script logs summary of units fetched.

6. **Document architecture decisions for S1**  
   - Record key setup choices (static export, MDX strategy, data-loading boundaries) in `docs/sprint/S1.md` and link follow-ups for S2+.  
   - Acceptance criteria: Section `## Implementation Notes` added post-build detailing decisions + TODOs.

## Definition of Done
- `pnpm lint && pnpm test && pnpm build` succeed in CI.  
- `out/` renders the curriculum overview with Integrated Math 3 data.  
- README updated with development + sync instructions.  
- Issues closed or moved to backlog if not completed with clear rationale.

## Implementation Notes

### Architectural Decisions Made During Sprint S1

#### Static Export Strategy
- Chose Next.js `output: 'export'` with `trailingSlash: true` for GitHub Pages compatibility
- All dynamic content must be generated at build-time or handled client-side
- localStorage used for all user state (progress, settings, SRS data) to maintain static compatibility
- Related work: Issue #1 · PR #7 captured the initial static shell implementation

#### Content Loading Architecture
- Build-time curriculum loading via `lib/getCurriculum()` transforms synced Khan Academy data
- Type-safe curriculum schema with Zod validation prevents runtime errors
- Curriculum overview page (`/curriculum`) renders static lesson listings that can be enhanced with client-side features
- Related work: Issue #2 · PR #8 established the curriculum loader contracts

#### Testing & Automation Baseline
- Established `pnpm lint`, `pnpm test`, and `pnpm build` gates with Vitest + ESLint integration
- Added initial loader unit tests and CI wiring to protect the static export pipeline
- Documented curriculum sync via `pnpm` script with logging for reproducibility
- Related work: Issue #4 · PR #12 (testing baseline) and Issue #5 · PR #13 (sync automation)

#### Foundation for Future Features
- **Mastery Tracking (Issue #9)**: The curriculum overview page structure established in Story #3 provides the foundation for adding visual mastery indicators (traffic light system). The static lesson listings can be enhanced with client-side `<MasteryIndicator />` components that read from localStorage progress data.
- **Spaced Practice Integration**: localStorage schema established for progress tracking will extend naturally to support Leitner SRS scheduling
- **Accessibility Framework**: Basic semantic markup and keyboard navigation patterns established in curriculum overview will scale to interactive components
- Related work: Issue #3 · PR #11 (curriculum overview) and Issue #9 · PR #10 (mastery indicator prototype)

### Sprint S1 → S2 Handoff
- Curriculum overview page ready for mastery indicator enhancement (Issue #9 prioritized for S2)
- Progress tracking data structure designed but not yet implemented
- Static export foundation proven compatible with client-side state management needs

### TODO & Future Work
- Establish design token system for consistent color and typography usage (candidate follow-up issue for Sprint S2)
- Investigate static build performance for large curriculum datasets and capture any caching strategies needed
- Stand up automated accessibility testing (axe/Playwright) ahead of interactive component work in S2+
